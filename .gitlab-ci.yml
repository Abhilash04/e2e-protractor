image: docker

services:
  - docker:dind

before_script:
  - apk add python python-dev py-pip build-base
  - pip install --quiet docker-compose~=1.23.0
  # - pip install docker-compose (gcc error with latest version)
  # - docker-compose build
  - docker-compose up -d

image: java:8

before_script:
  - sudo apt-add-repository ppa:qameta/allure
  - sudo apt-get update
  - sudo apt-get install allure

image: node:latest

before_script:
  - npm install

cache:
  paths:
    - node_modules/

tests:
  script:
    - npm test