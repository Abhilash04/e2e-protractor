build:
  image: gitlab/dind
  services:
    - docker:dind
  stage: build
  script:
    - docker pull openjdk
    - export JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64/"

tests:
  image: node:latest
  image: java:8u102-jdk
  stage: test
  script:
    - npm install
    - npm test

  cache:
    paths:
      - node_modules/
  artifacts:
      name: "myStake-$CI_COMMIT_TAG"
      paths:
        - artifacts/e2e/reports
      expire_in: 30 days
